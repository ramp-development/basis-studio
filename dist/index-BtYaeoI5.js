import{A as u}from"./app.js";import{d as w}from"./GSAP-BxWzQY2p.js";const p=u.getInstance();class S{constructor(t){var e,i,r;this.main=t,this.hero=this.main.querySelector(".cases"),this.items=this.main.querySelectorAll(".cases_item"),this.meshs=((r=(i=(e=p.gl)==null?void 0:e.world)==null?void 0:i.items)==null?void 0:r.meshs)||[],this.title=this.hero.querySelector("h1"),this.wrapperText=this.hero.querySelectorAll(".cases_text_wrapper"),this.firstTwoItems=[...this.items].slice(0,3),this.firstTwoMeshs=this.meshs.slice(0,3),this.titleSplit=new SplitText(this.title,{type:"lines"}),this.titleSplitSecond=new SplitText(this.title,{type:"lines",linesClass:"line-second"}),gsap.set(this.titleSplitSecond.lines,{overflow:"clip",paddingBottom:"0.1em",marginBottom:"-0.1em",perspective:1e3}),this.destroyed=!1,window.innerWidth<=992&&this.setMobileInitialStates(),this.init(),this.handleMobileWrapperText(),p.on("resize",()=>this.resize()),p.on("destroy",()=>this.destroy())}init(){this.tl=gsap.timeline({defaults:{ease:w.ease,duration:1},onComplete:()=>this.titleSplit.revert()}),this.tl.fromTo(this.titleSplit.lines,{y:"120%"},{y:"0%",stagger:.1,ease:"power3",stagger:.1},.8).fromTo(this.titleSplit.lines,{rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"},{rotateX:"0deg",rotateY:"0deg",z:"0rem",stagger:.1,ease:"power2",stagger:.1},"<"),window.innerWidth>992&&this.tl.fromTo(this.firstTwoItems,{yPercent:20,opacity:0},{yPercent:0,opacity:1,onUpdate:()=>{var t,e,i,r;return(r=(i=(e=(t=p.gl)==null?void 0:t.world)==null?void 0:e.items)==null?void 0:i.setPosition)==null?void 0:r.call(i)}},"<0.2"),window.innerWidth>992&&this.firstTwoMeshs.forEach(({mesh:t,material:e})=>{t.rotation.set(-.8,.8,-.3),t.scale.set(.4,.4,.4),this.tl.fromTo(e.uniforms.uLoading,{value:0},{value:1,duration:1},"<0.1").to(t.rotation,{x:0,y:0,z:0,duration:1,ease:"power3.out"},"<").to(t.scale,{x:1,y:1,z:1,duration:1,ease:"back.out(1.2)"},"<")})}handleMobileWrapperText(){window.innerWidth<992&&this.wrapperText.forEach(e=>{e.children.length===1&&(e.style.flexDirection="row");const i=e.querySelector(".cases_email_text");i&&(i.textContent="Contact Us")})}resize(){var t;this.destroyed||((t=this.titleSplit)==null||t.revert(),this.handleMobileWrapperText())}destroy(){var t;this.destroyed||(this.destroyed=!0,(t=this.tl)==null||t.kill())}setMobileInitialStates(){gsap.set(this.titleSplit.lines,{y:"120%",rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"})}}const n=u.getInstance();class T{constructor(t){var i,r,l;if(this.main=t,window.innerWidth<991)return;this.hero=this.main.querySelector(".cases"),this.sticky=this.hero.querySelector(".cases_sticky"),this.wrapper=this.hero.querySelector(".cases_wrapper"),this.list=this.hero.querySelector(".cases_list"),this.items=this.hero.querySelectorAll(".cases_item"),this.destroyed=!1,this.quicks=[];const e=()=>{var s,o,a;if(!((a=(o=(s=n.gl)==null?void 0:s.world)==null?void 0:o.items)!=null&&a.meshs)){console.warn("GL world items not ready, skipping parallax setup");return}this.quicks=[...this.items].map((m,d)=>{var c;const h=(c=n.gl.world.items.meshs[d])==null?void 0:c.mesh;return h?gsap.quickTo(h.material.uniforms.uParallax,"value",{duration:.3,ease:"power2"}):null}).filter(Boolean)};e(),(l=(r=(i=n.gl)==null?void 0:i.world)==null?void 0:r.items)!=null&&l.meshs||n.once("loadedWorld",()=>{e()}),this.init(),n.on("resize",()=>this.resize()),n.on("destroy",()=>this.destroy())}init(){this.hero.style.setProperty("--length",this.items.length);const t=this.hero.getBoundingClientRect().left,e=this.wrapper.getBoundingClientRect().left,r=this.list.getBoundingClientRect().width+e-window.innerWidth+t;this.tl=gsap.timeline({}),this.tl.fromTo(this.sticky,{x:0},{x:-r,ease:"none",duration:1.5}),this.srcoll=ScrollTrigger.create({trigger:this.hero,start:"top top",end:"bottom bottom",scrub:!0,animation:this.tl}),this.scrolls=[],this.innerTls=[],this.enterInnerTls=[],this.items.forEach((l,s)=>{var a,m,d,h,c;const o=(c=(h=(d=(m=(a=n.gl)==null?void 0:a.world)==null?void 0:m.items)==null?void 0:d.meshs)==null?void 0:h[s])==null?void 0:c.mesh;o&&(this.scrolls[s]=ScrollTrigger.create({trigger:l,containerAnimation:this.tl,start:"left right",end:"right left",onUpdate:f=>{const y=gsap.utils.mapRange(0,1,-.05,.05,f.progress);this.quicks[s](y)}}),o.rotation.set(-.1,.1,-.1),o.scale.set(.4,.4,.4),!(s<3)&&(this.innerTls[s]=gsap.timeline({paused:!0,defaults:{ease:"power3",duration:1}}),this.innerTls[s].fromTo(o.material.uniforms.uLoading,{value:0},{value:1}).to(o.rotation,{x:0,y:0,z:0,duration:1,ease:"power3.out"},"<").to(o.scale,{x:1,y:1,z:1,duration:1,ease:"back.out(1.2)"},"<").fromTo(l,{yPercent:20,opacity:0},{yPercent:0,opacity:1},"<"),this.enterInnerTls[s]=ScrollTrigger.create({trigger:l,start:"left 75%",containerAnimation:this.tl,onEnter:()=>this.innerTls[s].play()})))})}resize(){var t,e;this.destroyed||((t=this.tl)==null||t.kill(),(e=this.srcoll)==null||e.kill(),this.scrolls.forEach(i=>i==null?void 0:i.kill()),this.init())}destroy(){var t,e;this.destroyed||(this.destroyed=!0,(t=this.tl)==null||t.kill(),(e=this.srcoll)==null||e.kill(),this.scrolls.forEach(i=>i==null?void 0:i.kill()))}}const k=u.getInstance();class z{constructor(t){this.main=t,this.once=!1,this.triggerLoad=async()=>this.load(),k.onceLoaded&&this.load()}load(){this.loader=new S(this.main),this.hero=new T(this.main),this.once=!0}}export{z as default};
