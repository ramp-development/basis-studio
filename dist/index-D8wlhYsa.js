import{d as g}from"./GSAP-BxWzQY2p.js";class f{constructor(t,e){var i,r,o;this.main=t,this.app=e,this.hero=this.main.querySelector(".cases"),this.items=this.main.querySelectorAll(".cases_item"),this.meshs=((o=(r=(i=this.app.gl)==null?void 0:i.world)==null?void 0:r.items)==null?void 0:o.meshs)||[],this.title=this.hero.querySelector("h1"),this.wrapperText=this.hero.querySelectorAll(".cases_text_wrapper"),this.firstTwoItems=[...this.items].slice(0,3),this.firstTwoMeshs=this.meshs.slice(0,3),this.titleSplit=new SplitText(this.title,{type:"lines"}),this.titleSplitSecond=new SplitText(this.title,{type:"lines",linesClass:"line-second"}),gsap.set(this.titleSplitSecond.lines,{overflow:"clip",paddingBottom:"0.1em",marginBottom:"-0.1em",perspective:1e3}),this.destroyed=!1,window.innerWidth<=992&&this.setMobileInitialStates(),this.init(),this.handleMobileWrapperText(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy())}init(){this.tl=gsap.timeline({defaults:{ease:g.ease,duration:1},onComplete:()=>this.titleSplit.revert()}),this.tl.fromTo(this.titleSplit.lines,{y:"120%"},{y:"0%",stagger:.1,ease:"power3",stagger:.1},.8).fromTo(this.titleSplit.lines,{rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"},{rotateX:"0deg",rotateY:"0deg",z:"0rem",stagger:.1,ease:"power2",stagger:.1},"<"),window.innerWidth>992&&this.tl.fromTo(this.firstTwoItems,{yPercent:20,opacity:0},{yPercent:0,opacity:1,onUpdate:()=>{var t,e,i,r;return(r=(i=(e=(t=this.app.gl)==null?void 0:t.world)==null?void 0:e.items)==null?void 0:i.setPosition)==null?void 0:r.call(i)}},"<0.2"),window.innerWidth>992&&this.firstTwoMeshs.forEach(({mesh:t,material:e})=>{t.rotation.set(-.8,.8,-.3),t.scale.set(.4,.4,.4),this.tl.fromTo(e.uniforms.uLoading,{value:0},{value:1,duration:1},"<0.1").to(t.rotation,{x:0,y:0,z:0,duration:1,ease:"power3.out"},"<").to(t.scale,{x:1,y:1,z:1,duration:1,ease:"back.out(1.2)"},"<")})}handleMobileWrapperText(){window.innerWidth<992&&this.wrapperText.forEach(e=>{e.children.length===1&&(e.style.flexDirection="row");const i=e.querySelector(".cases_email_text");i&&(i.textContent="Contact Us")})}resize(){var t;this.destroyed||((t=this.titleSplit)==null||t.revert(),this.handleMobileWrapperText())}destroy(){var t;this.destroyed||(this.destroyed=!0,(t=this.tl)==null||t.kill())}setMobileInitialStates(){gsap.set(this.titleSplit.lines,{y:"120%",rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"})}}class y{constructor(t,e){var r,o,s;if(this.main=t,this.app=e,window.innerWidth<991)return;this.hero=this.main.querySelector(".cases"),this.sticky=this.hero.querySelector(".cases_sticky"),this.wrapper=this.hero.querySelector(".cases_wrapper"),this.list=this.hero.querySelector(".cases_list"),this.items=this.hero.querySelectorAll(".cases_item"),this.destroyed=!1,this.quicks=[];const i=()=>{var l,a,n;if(!((n=(a=(l=this.app.gl)==null?void 0:l.world)==null?void 0:a.items)!=null&&n.meshs)){console.warn("GL world items not ready, skipping parallax setup");return}this.quicks=[...this.items].map((c,p)=>{var d;const h=(d=this.app.gl.world.items.meshs[p])==null?void 0:d.mesh;return h?gsap.quickTo(h.material.uniforms.uParallax,"value",{duration:.3,ease:"power2"}):null}).filter(Boolean)};i(),(s=(o=(r=this.app.gl)==null?void 0:r.world)==null?void 0:o.items)!=null&&s.meshs||this.app.once("loadedWorld",()=>{i()}),this.init(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy())}init(){this.hero.style.setProperty("--length",this.items.length);const t=this.hero.getBoundingClientRect().left,e=this.wrapper.getBoundingClientRect().left,r=this.list.getBoundingClientRect().width+e-window.innerWidth+t;this.tl=gsap.timeline({}),this.tl.fromTo(this.sticky,{x:0},{x:-r,ease:"none",duration:1.5}),this.srcoll=ScrollTrigger.create({trigger:this.hero,start:"top top",end:"bottom bottom",scrub:!0,animation:this.tl}),this.scrolls=[],this.innerTls=[],this.enterInnerTls=[],this.items.forEach((o,s)=>{var a,n,c,p,h;const l=(h=(p=(c=(n=(a=this.app.gl)==null?void 0:a.world)==null?void 0:n.items)==null?void 0:c.meshs)==null?void 0:p[s])==null?void 0:h.mesh;l&&(this.scrolls[s]=ScrollTrigger.create({trigger:o,containerAnimation:this.tl,start:"left right",end:"right left",onUpdate:d=>{const u=gsap.utils.mapRange(0,1,-.05,.05,d.progress);this.quicks[s](u)}}),l.rotation.set(-.1,.1,-.1),l.scale.set(.4,.4,.4),!(s<3)&&(this.innerTls[s]=gsap.timeline({paused:!0,defaults:{ease:"power3",duration:1}}),this.innerTls[s].fromTo(l.material.uniforms.uLoading,{value:0},{value:1}).to(l.rotation,{x:0,y:0,z:0,duration:1,ease:"power3.out"},"<").to(l.scale,{x:1,y:1,z:1,duration:1,ease:"back.out(1.2)"},"<").fromTo(o,{yPercent:20,opacity:0},{yPercent:0,opacity:1},"<"),this.enterInnerTls[s]=ScrollTrigger.create({trigger:o,start:"left 75%",containerAnimation:this.tl,onEnter:()=>this.innerTls[s].play()})))})}resize(){var t,e;this.destroyed||((t=this.tl)==null||t.kill(),(e=this.srcoll)==null||e.kill(),this.scrolls.forEach(i=>i==null?void 0:i.kill()),this.init())}destroy(){var t,e;this.destroyed||(this.destroyed=!0,(t=this.tl)==null||t.kill(),(e=this.srcoll)==null||e.kill(),this.scrolls.forEach(i=>i==null?void 0:i.kill()))}}class S{constructor(t,e){this.main=t,this.app=e,this.once=!1,this.triggerLoad=async()=>this.load(),this.app.onceLoaded&&this.load()}load(){this.loader=new f(this.main,this.app),this.hero=new y(this.main,this.app),this.once=!0}}export{S as default};
