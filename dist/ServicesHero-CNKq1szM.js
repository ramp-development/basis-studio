import{g as s}from"./all-Cn1KrK_M.js";import{S as o}from"./ScrollTrigger-BWsqEc1I.js";import"./CSSPlugin-YLlZY2Jb.js";s.registerPlugin(o);class y{constructor(i,t){this.instance=i,this.app=t,this.destroyed=!1,this.isMobile=window.innerWidth<992,this.title=this.instance.querySelector(".h-services_title"),this.text=this.title.querySelector("h1"),this.btn=this.instance.querySelector(".h-services_btn"),this.bg=this.instance.querySelector(".h-services_bg"),this.init(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy())}init(){this.isMobile?this.initMobile():this.initDesktop()}initMobile(){this.tl=s.timeline({paused:!0});const i=this.title.offsetHeight,t=Math.min(i*.5,150);this.tl.fromTo(this.title,{y:0},{y:-t,ease:"power2.out",duration:1}).fromTo(this.text,{scale:1},{scale:1.05,ease:"power2.out",duration:1},"<").fromTo(this.btn,{yPercent:100,opacity:0},{yPercent:0,opacity:1,ease:"power2.out",duration:.4},.3),this.scroll=o.create({trigger:this.instance,start:"top top",end:"bottom center",animation:this.tl,scrub:1,onUpdate:e=>{this.bg.style.setProperty("--progress",e.progress)}})}initDesktop(){this.tl=s.timeline({paused:!0});const i=window.innerHeight/2,t=this.title.getBoundingClientRect(),e=t.top+t.height/2-i;this.tl.fromTo(this.title,{y:0},{y:-e,ease:"power3",duration:1}).fromTo(this.text,{scale:1},{scale:1.4,ease:"power3",duration:1},"<").fromTo(this.btn,{yPercent:100,opacity:0},{yPercent:0,opacity:1,ease:"power3",duration:.5},.5),this.scroll=o.create({trigger:this.instance,start:"top top",end:"bottom bottom",animation:this.tl,scrub:!0,onUpdate:r=>{var l,n,h,a,c;(c=(a=(h=(n=(l=this.app.gl)==null?void 0:l.world)==null?void 0:n.hero)==null?void 0:h.material)==null?void 0:a.uniforms)!=null&&c.uScroll&&(this.app.gl.world.hero.material.uniforms.uScroll.value=r.progress),this.bg.style.setProperty("--progress",r.progress)}})}resize(){var t,e;if(this.destroyed)return;const i=this.isMobile;this.isMobile=window.innerWidth<992,i!==this.isMobile&&((t=this.tl)==null||t.kill(),(e=this.scroll)==null||e.kill(),this.init())}destroy(){var i,t;this.destroyed||(this.destroyed=!0,(i=this.tl)==null||i.kill(),(t=this.scroll)==null||t.kill(),this.tl=null,this.scroll=null)}}export{y as default};
