import{g as s}from"./all-Cn1KrK_M.js";import{d as u}from"./GSAP-km8nWVCW.js";import{S as r}from"./SplitText-n_eiQhs4.js";import{g as l}from"./index-Cn1KrK_M.js";import"./CSSPlugin-YLlZY2Jb.js";import"./ScrollTrigger-BWsqEc1I.js";s.registerPlugin(r);class g{constructor(t,e){this.main=t,this.app=e,this.hero=this.main.querySelector(".hero"),this.title=this.hero.querySelector("h1"),this.descr=this.hero.querySelector("p"),this.btn=this.hero.querySelector(".btn"),this.imagesParent=this.hero.querySelector(".hero_images"),this.images=this.imagesParent.querySelectorAll(".hero_image"),this.titleSplit=new r(this.title,{type:"lines"}),this.titleSplitSecond=new r(this.title,{type:"lines",linesClass:"line-second"}),s.set(this.titleSplitSecond.lines,{overflow:"clip",paddingBottom:"0.1em",marginBottom:"-0.1em",perspective:1e3}),this.descrSplit=new r(this.descr,{type:"lines"}),this.descrSplitSecond=new r(this.descr,{type:"lines"}),s.set(this.descrSplitSecond.lines,{overflow:"clip",paddingBottom:"0.1em",marginBottom:"-0.1em"}),this.destroyed=!1,this.setInitialStates(),this.checkInit(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy())}setInitialStates(){window.innerWidth<=992?(s.set(this.titleSplit.lines,{y:"120%"}),s.set(this.imagesParent,{yPercent:20,scale:.6,autoAlpha:0}),s.set(this.images,{scale:.8,opacity:0,autoAlpha:0})):s.set(this.titleSplit.lines,{y:"120%",rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"}),s.set(this.descrSplit.lines,{y:"120%"}),s.set(this.btn,{opacity:0,filter:"blur(10px)"})}checkInit(){window.innerWidth>992?this.init():this.mobInit()}init(){this.meshs=this.app.gl.world.hero.meshs,this.group=this.app.gl.world.hero.group,this.tl=s.timeline({defaults:{ease:u.ease,duration:1.4},onStart:()=>{const i=this.tl.duration()*.85*1e3;setTimeout(()=>{this.app.trigger("homeAnimationStatic")},i)},onComplete:()=>{this.titleSplit.revert(),this.descrSplit.revert(),this.app.trigger("homeAnimationComplete")}}),this.tl.fromTo(this.group.position,{y:-window.innerHeight/2},{y:0,duration:3.5,ease:"power1"},0),this.meshs.forEach(({mesh:t},e)=>{this.tl.fromTo(t.position,{z:600},{z:0,stagger:.1,duration:2.5,ease:"power1"},e*.2+.4).fromTo(t.material.uniforms.uOpacity,{value:0},{value:1,duration:3.5},"<")}),this.tl.fromTo(this.titleSplit.lines,{y:"120%"},{y:"0%",stagger:.1,ease:"power3"},"<0.2").fromTo(this.titleSplit.lines,{rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"},{rotateX:"0deg",rotateY:"0deg",z:"0rem",stagger:.1,ease:"power2",stagger:.1},"<").fromTo(this.descrSplit.lines,{y:"120%"},{y:"0%",stagger:.1,ease:"power3"},"<0.2").fromTo(this.btn,{opacity:0,filter:"blur(10px)"},{opacity:1,filter:"blur(0px)"},"<0.3")}mobInit(){this.tl=s.timeline({defaults:{ease:u.ease,duration:1.4},onStart:()=>{const i=this.tl.duration()*.85*1e3;setTimeout(()=>{this.app.trigger("homeAnimationStatic")},i)},onComplete:()=>{this.titleSplit.revert(),this.descrSplit.revert(),this.app.trigger("homeAnimationComplete")}}),this.tl.from(this.images,{yPercent:-80,duration:3.5,ease:"power1",stagger:.2}).fromTo(this.titleSplit.lines,{y:"120%"},{y:"0%",duration:2,stagger:.1,ease:"power3"},"<0.6").fromTo(this.descrSplit.lines,{y:"120%"},{y:"0%",duration:2,stagger:.1,ease:"power3"},"<0.2").fromTo(this.btn,{opacity:0,filter:"blur(10px)"},{opacity:1,filter:"blur(0px)"},"<0.3").fromTo(this.imagesParent,{yPercent:-20,scale:.6,autoAlpha:0},{yPercent:0,scale:1,autoAlpha:1,duration:2,ease:"power1",force3D:!0},.6).fromTo(this.images,{scale:.8,opacity:0,autoAlpha:0},{scale:1,opacity:1,autoAlpha:1,duration:2,ease:"power1",stagger:.15,force3D:!0},.4)}resize(){var t,e;this.destroyed||((t=this.titleSplit)==null||t.revert(),(e=this.descrSplit)==null||e.revert())}destroy(){var t;this.destroyed||(this.destroyed=!0,(t=this.tl)==null||t.kill())}}class y{constructor(t,e){this.main=t,this.app=e,this.hero=this.main.querySelector(".hero"),this.images=this.hero.querySelectorAll(".hero_image, .hero_video"),this.videos=this.hero.querySelectorAll(".hero_video video"),this.button=this.hero.querySelector(".hero_button"),this.destroyed=!1,this.mouseEnabled=!1,this.quicks=[...this.images].map((i,n)=>{if(window.innerWidth<992)return;const o=l.quickTo(i,"x",{duration:.5,ease:"power2",onUpdate:()=>{var d,c,m;n!==0||this.destroyed||(m=(c=(d=this.app.gl)==null?void 0:d.world)==null?void 0:c.hero)!=null&&m.setPosition&&this.app.gl.world.hero.setPosition()}}),a=l.quickTo(i,"y",{duration:.5,ease:"power2"}),h=l.utils.random(.8,1.2,.1);return{x:o,y:a,random:h}}),this.main.addEventListener("mousemove",i=>this.mouseMove(i)),this.app.on("homeAnimationStatic",()=>{this.playHeroVideos()}),this.app.on("homeAnimationComplete",()=>{this.mouseEnabled=!0}),this.button&&this.button.addEventListener("click",i=>this.handleButtonClick(i)),this.init(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy())}mouseMove(t){if(this.destroyed||!this.mouseEnabled||window.innerWidth<992)return;const e={x:t.clientX/window.innerWidth-.5,y:t.clientY/window.innerHeight-.5},i=window.innerWidth*.2,n=window.innerHeight*.15;this.quicks.forEach(o=>{const a=e.x*i*o.random,h=e.y*n*o.random;o.x(a*-1),o.y(h*-1)})}playHeroVideos(){this.videos.forEach(t=>{const e=t._videoLoaderInstance;e&&e.playVideo()})}init(){}handleButtonClick(t){t.preventDefault();const e=document.querySelector("#work_with");this.app.scroll.lenis.scrollTo(e,{offset:window.innerHeight*.35,lerp:.1,duration:1.5,immediate:!1,lock:!1,force:!1})}resize(){this.destroyed}destroy(){this.destroyed||(this.destroyed=!0)}}class A{constructor(t,e){this.main=t,this.app=e,this.once=!1,this.triggerLoad=async()=>this.load(),this.app.onceLoaded&&this.load()}load(){this.once||(this.loader=new g(this.main,this.app),this.hero=new y(this.main,this.app),this.once=!0)}}export{A as default};
