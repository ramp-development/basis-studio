import{A as L}from"./app.js";const o=L.getInstance();class _{constructor(e,l){this.instance=e,this.main=l,this.destroyed=!1,this.wrapper=this.instance.querySelector(".full_wrapper"),this.items=this.instance.querySelectorAll(".full_item"),this.init(),o.on("resize",()=>this.resize()),o.on("destroy",()=>this.destroy())}init(){this.splits=[],this.scrolls=[],gsap.set(this.wrapper,{height:this.items.length*150+150+"vh"}),ScrollTrigger.refresh(),this.height=this.instance.getBoundingClientRect().height,this.itemPart=this.height/(this.items.length+.3),this.items.forEach((e,l)=>{const u=e.querySelector(".f-64"),y=e.querySelector("p"),c=e.querySelector("video"),p=e.querySelector(".full_button"),h=new SplitText(u,{type:"lines",linesClass:"full_line"}),v=new SplitText(u,{type:"lines",linesClass:"full_line-parent"}),d=new SplitText(y,{type:"lines",linesClass:"full_line"}),g=new SplitText(y,{type:"lines",linesClass:"full_line-parent"});this.splits.push(d,h,g);const b=[...v.lines],m=[...g.lines],T=[...h.lines],w=[...d.lines],x=[...b,...m],S=[...T,...w];gsap.set(x,{overflow:"hidden",perspective:1e3,perspectiveOrigin:"center center"}),gsap.set(S,{y:"120%",rotateX:"-45deg",transformOrigin:"center bottom",transformStyle:"preserve-3d"});const f=gsap.timeline({paused:!0});if(f.to(T,{y:"0%",rotateX:"0deg",duration:.8,ease:"power3.out",stagger:.1},0).to(w,{y:"0%",rotateX:"0deg",duration:.8,ease:"power3.out",stagger:.1},.05),p&&window.innerWidth<=991&&(gsap.set(p,{opacity:0,y:20,scale:.8}),f.to(p,{opacity:1,y:0,scale:1,duration:.6,ease:"power3.out"},">")),e.textTl=f,d.lines.forEach((t,s)=>{const i=s*.1+.1;t.style.setProperty("--delay",i+"s")}),h.lines.forEach((t,s)=>{const i=s*.1+.1;t.style.setProperty("--delay",i+"s")}),c&&window.innerWidth<=991){gsap.set(c.parentElement,{perspective:1e3,perspectiveOrigin:"center center"}),gsap.set(c,{transformOrigin:"center center",transformStyle:"preserve-3d",opacity:0,rotationZ:-18,rotationY:45,rotationX:-45,scale:.4});const t=gsap.timeline({paused:!0});t.to(c,{opacity:1,rotationZ:0,rotationY:0,rotationX:0,scale:1,duration:1,ease:"power3.out"}),e.mobileTl=t}this.scrolls[l]=ScrollTrigger.create({trigger:e,start:`top center-=${this.itemPart*l}`,end:`+=${this.itemPart}`,onEnter:()=>{var t,s,i,n,a;if(this.items.forEach(r=>{r.classList.remove("active"),r.textTl&&r.textTl.pause(0)}),e.classList.add("active"),e.classList.add("show-bg"),window.innerWidth<991){this.items.forEach(r=>{r.querySelector("video")&&r.mobileTl&&r.mobileTl.pause(0)}),e.mobileTl&&e.mobileTl.play(),e.textTl&&e.textTl.play();return}(a=(n=(i=(s=(t=o.gl)==null?void 0:t.world)==null?void 0:s.full)==null?void 0:i.meshs)==null?void 0:n[l])!=null&&a.tl&&o.gl.world.full.meshs[l].tl.play(),e.textTl&&e.textTl.play()},onEnterBack:()=>{if(this.items.forEach(t=>{t.classList.remove("active"),t.textTl&&t.textTl.pause(0)}),e.classList.add("active"),window.innerWidth<991){this.items.forEach(t=>{t.mobileTl&&t.mobileTl.pause(0)}),e.mobileTl&&e.mobileTl.play(),e.textTl&&e.textTl.play();return}e.textTl&&e.textTl.play()},onLeaveBack:()=>{var t,s,i,n,a;if(e.classList.remove("show-bg"),e.textTl&&e.textTl.reverse(),window.innerWidth<991){e.mobileTl&&e.mobileTl.reverse();return}(a=(n=(i=(s=(t=o.gl)==null?void 0:t.world)==null?void 0:s.full)==null?void 0:i.meshs)==null?void 0:n[l])!=null&&a.tl&&o.gl.world.full.meshs[l].tl.reverse()}})})}resize(){this.destroyed}destroy(){this.destroyed||(this.destroyed=!0)}}export{_ as default};
