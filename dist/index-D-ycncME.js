import{g as l}from"./index-Cn1KrK_M.js";import{d as w}from"./GSAP-km8nWVCW.js";import{S as f}from"./SplitText-n_eiQhs4.js";import{S as p}from"./ScrollTrigger-BWsqEc1I.js";import"./CSSPlugin-YLlZY2Jb.js";class S{constructor(t,e){var i,s,r;this.main=t,this.app=e,this.hero=this.main.querySelector(".cases"),this.items=this.main.querySelectorAll(".cases_item"),this.meshs=((r=(s=(i=this.app.gl)==null?void 0:i.world)==null?void 0:s.items)==null?void 0:r.meshs)||[],this.title=this.hero.querySelector("h1"),this.wrapperText=this.hero.querySelectorAll(".cases_text_wrapper"),this.firstTwoItems=[...this.items].slice(0,3),this.firstTwoMeshs=this.meshs.slice(0,3),this.titleSplit=new f(this.title,{type:"lines"}),this.titleSplitSecond=new f(this.title,{type:"lines",linesClass:"line-second"}),l.set(this.titleSplitSecond.lines,{overflow:"clip",paddingBottom:"0.1em",marginBottom:"-0.1em",perspective:1e3}),this.destroyed=!1,window.innerWidth<=992&&this.setMobileInitialStates(),this.init(),this.handleMobileWrapperText(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy())}init(){this.tl=l.timeline({defaults:{ease:w.ease,duration:1},onComplete:()=>this.titleSplit.revert()}),this.tl.fromTo(this.titleSplit.lines,{y:"120%"},{y:"0%",stagger:.1,ease:"power3",stagger:.1},.8).fromTo(this.titleSplit.lines,{rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"},{rotateX:"0deg",rotateY:"0deg",z:"0rem",stagger:.1,ease:"power2",stagger:.1},"<"),window.innerWidth>992&&this.tl.fromTo(this.firstTwoItems,{yPercent:20,opacity:0},{yPercent:0,opacity:1,onUpdate:()=>{var t,e,i,s;return(s=(i=(e=(t=this.app.gl)==null?void 0:t.world)==null?void 0:e.items)==null?void 0:i.setPosition)==null?void 0:s.call(i)}},"<0.2"),window.innerWidth>992&&this.firstTwoMeshs.forEach(({mesh:t,material:e})=>{t.rotation.set(-.8,.8,-.3),t.scale.set(.4,.4,.4),this.tl.fromTo(e.uniforms.uLoading,{value:0},{value:1,duration:1},"<0.1").to(t.rotation,{x:0,y:0,z:0,duration:1,ease:"power3.out"},"<").to(t.scale,{x:1,y:1,z:1,duration:1,ease:"back.out(1.2)"},"<")})}handleMobileWrapperText(){window.innerWidth<992&&this.wrapperText.forEach(e=>{e.children.length===1&&(e.style.flexDirection="row");const i=e.querySelector(".cases_email_text");i&&(i.textContent="Contact Us")})}resize(){var t;this.destroyed||((t=this.titleSplit)==null||t.revert(),this.handleMobileWrapperText())}destroy(){var t;this.destroyed||(this.destroyed=!0,(t=this.tl)==null||t.kill())}setMobileInitialStates(){l.set(this.titleSplit.lines,{y:"120%",rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"})}}class T{constructor(t,e){var i,s,r;this.main=t,this.app=e,!(window.innerWidth<991)&&(this.hero=this.main.querySelector(".cases"),this.sticky=this.hero.querySelector(".cases_sticky"),this.wrapper=this.hero.querySelector(".cases_wrapper"),this.list=this.hero.querySelector(".cases_list"),this.items=this.hero.querySelectorAll(".cases_item"),this.destroyed=!1,(r=(s=(i=this.app.gl)==null?void 0:i.world)==null?void 0:s.items)!=null&&r.meshs?this.quicks=[...this.items].map((o,a)=>{var h;const n=(h=this.app.gl.world.items.meshs[a])==null?void 0:h.mesh;return n?l.quickTo(n.material.uniforms.uParallax,"value",{duration:.3,ease:"power2"}):null}).filter(Boolean):(console.warn("GL world items not ready, skipping parallax setup"),this.quicks=[]),this.init(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy()))}init(){this.hero.style.setProperty("--length",this.items.length);const t=this.hero.getBoundingClientRect().left,e=this.wrapper.getBoundingClientRect().left,s=this.list.getBoundingClientRect().width+e-window.innerWidth+t;this.tl=l.timeline({}),this.tl.fromTo(this.sticky,{x:0},{x:-s,ease:"none",duration:1.5}),this.srcoll=p.create({trigger:this.hero,start:"top top",end:"bottom bottom",scrub:!0,animation:this.tl}),this.scrolls=[],this.innerTls=[],this.enterInnerTls=[],this.items.forEach((r,o)=>{var n,h,c,m,u;const a=(u=(m=(c=(h=(n=this.app.gl)==null?void 0:n.world)==null?void 0:h.items)==null?void 0:c.meshs)==null?void 0:m[o])==null?void 0:u.mesh;a&&(this.scrolls[o]=p.create({trigger:r,containerAnimation:this.tl,start:"left right",end:"right left",onUpdate:g=>{const y=l.utils.mapRange(0,1,-.05,.05,g.progress);this.quicks[o](y)}}),!(o<3)&&(this.innerTls[o]=l.timeline({paused:!0,defaults:{ease:"power3",duration:1}}),a.rotation.set(-.8,.8,-.3),a.scale.set(.4,.4,.4),this.innerTls[o].fromTo(a.material.uniforms.uLoading,{value:.5},{value:1}).to(a.rotation,{x:0,y:0,z:0,duration:1,ease:"power3.out"},"<").to(a.scale,{x:1,y:1,z:1,duration:1,ease:"back.out(1.2)"},"<").fromTo(r,{yPercent:20,opacity:0},{yPercent:0,opacity:1},"<"),this.enterInnerTls[o]=p.create({trigger:r,start:"left 75%",containerAnimation:this.tl,onEnter:()=>this.innerTls[o].play()})))})}resize(){var t,e;this.destroyed||((t=this.tl)==null||t.kill(),(e=this.srcoll)==null||e.kill(),this.scrolls.forEach(i=>i==null?void 0:i.kill()),this.init())}destroy(){var t,e;this.destroyed||(this.destroyed=!0,(t=this.tl)==null||t.kill(),(e=this.srcoll)==null||e.kill(),this.scrolls.forEach(i=>i==null?void 0:i.kill()))}}class v{constructor(t,e){this.main=t,this.app=e,this.once=!1,this.triggerLoad=async()=>this.load(),this.app.onceLoaded&&this.load()}load(){this.loader=new S(this.main,this.app),this.hero=new T(this.main,this.app),this.once=!0}}export{v as default};
