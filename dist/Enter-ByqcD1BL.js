import{g as e}from"./index-Cn1KrK_M.js";import{S as i}from"./ScrollTrigger-BWsqEc1I.js";import"./CSSPlugin-YLlZY2Jb.js";e.registerPlugin(i);class h{constructor(t,s,o){this.app=o,this.container=t.next.container,this.checkPages=s,this.data=t,this.loader=document.querySelector(".loader"),this.once=!1,e.set(this.loader,{"--clip":0,"--leftClip":0,"--bottomClip":0}),this.tl=e.timeline({paused:!0,defaults:{duration:.8,ease:"power2.inOut"}}),this.app.enterPage=this,this.tl.to(this.loader,{"--clip":100,onComplete:()=>this.complete()}),this.start()}complete(){this.loader.classList.add("hidden")}start(){e.set(this.container,{autoAlpha:1}),document.documentElement.style.scrollBehavior="instant",window.scrollTo({top:0,left:0,behavior:"instant"}),requestAnimationFrame(()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),requestAnimationFrame(()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.style.scrollBehavior=""})}),window.innerWidth>992?(this.app.gl.loadWorld(this.container),this.app.on("loadedWorld",async()=>{this.once||(this.checkPages(this.app,this.container),await this.app.moduleLoader.loadModules(this.container),await new Promise(t=>setTimeout(t,50)),this.app.scroll.init(),this.app.scroll.lenis.on("scroll",t=>this.app.gl.setScroll(t)),this.tl.play(),this.once=!0)})):(async()=>(this.checkPages(this.app,this.container),await this.app.moduleLoader.loadModules(this.container),await new Promise(t=>setTimeout(t,50)),this.app.scroll.init(),this.app.scroll.lenis.on("scroll",t=>this.app.gl.setScroll(t)),this.tl.play()))(),i.refresh()}}export{h as default};
