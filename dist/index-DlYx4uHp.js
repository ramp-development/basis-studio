import{A as d}from"./app.js";import{d as p}from"./GSAP-BxWzQY2p.js";import{i as m}from"./isSafari-DYs6RIMp.js";const o=d.getInstance();class g{constructor(t){this.main=t,this.hero=this.main.querySelector(".hero"),this.title=this.hero.querySelector("h1"),this.descr=this.hero.querySelector("p"),this.btn=this.hero.querySelector(".btn"),this.imagesParent=this.hero.querySelector(".hero_images"),this.images=this.imagesParent.querySelectorAll(".hero_image"),this.titleSplit=new SplitText(this.title,{type:"lines",mask:"lines"}),gsap.set(this.titleSplit.lines,{paddingBottom:"0.1em",marginBottom:"-0.1em",perspective:1e3}),this.descrSplit=new SplitText(this.descr,{type:"lines",mask:"lines"}),gsap.set(this.descrSplit.lines,{paddingBottom:"0.1em",marginBottom:"-0.1em"}),this.destroyed=!1,this.setInitialStates(),this.checkInit(),o.on("resize",()=>this.resize()),o.on("destroy",()=>this.destroy())}setInitialStates(){window.innerWidth<=992?(gsap.set(this.titleSplit.lines,{yPercent:120}),gsap.set(this.imagesParent,{yPercent:20,scale:.6,autoAlpha:0}),gsap.set(this.images,{scale:.8,opacity:0,autoAlpha:0})):gsap.set(this.titleSplit.lines,{yPercent:120,rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"}),gsap.set(this.descrSplit.lines,{yPercent:120}),gsap.set(this.btn,{opacity:0,filter:"blur(10px)"})}checkInit(){window.innerWidth>992?this.init():this.mobInit()}init(){this.meshs=o.gl.world.hero.meshs,this.group=o.gl.world.hero.group,this.tl=gsap.timeline({defaults:{ease:p.ease,duration:1.4},onStart:()=>{const s=this.tl.duration()*.85*1e3;setTimeout(()=>{o.trigger("homeAnimationStatic")},s)},onComplete:()=>{this.titleSplit.revert(),this.descrSplit.revert(),o.trigger("homeAnimationComplete")}}),this.tl.fromTo(this.group.position,{y:-window.innerHeight/2},{y:0,duration:3.5,ease:"power1"},0),this.meshs.forEach(({mesh:t},e)=>{this.tl.fromTo(t.position,{z:600},{z:0,stagger:.1,duration:2.5,ease:"power1"},e*.2+.4).fromTo(t.material.uniforms.uOpacity,{value:0},{value:1,duration:3.5},"<")}),this.tl.to(this.titleSplit.lines,{yPercent:0,stagger:.1,ease:"power3"},"<0.2").to(this.titleSplit.lines,{rotateX:"0deg",rotateY:"0deg",z:"0rem",stagger:.1,ease:"power2",stagger:.1},"<").to(this.descrSplit.lines,{yPercent:0,stagger:.1,ease:"power3"},"<0.2").to(this.btn,{opacity:1,filter:"blur(0px)"},"<0.3")}mobInit(){this.tl=gsap.timeline({defaults:{ease:p.ease,duration:1.4},onStart:()=>{const s=this.tl.duration()*.85*1e3;setTimeout(()=>{o.trigger("homeAnimationStatic")},s)},onComplete:()=>{this.titleSplit.revert(),this.descrSplit.revert(),o.trigger("homeAnimationComplete")}}),this.tl.from(this.images,{yPercent:-80,duration:3.5,ease:"power1.inOut",stagger:.2}).to(this.titleSplit.lines,{yPercent:0,duration:2,stagger:.1,ease:"power3"},"<2").to(this.descrSplit.lines,{yPercent:0,duration:2,stagger:.1,ease:"power3"},"<0.2").to(this.btn,{opacity:1,filter:"blur(0px)"},"<0.3").to(this.imagesParent,{yPercent:0,scale:1,autoAlpha:1,duration:2,ease:"power1",force3D:!0},.6).to(this.images,{scale:1,opacity:1,autoAlpha:1,duration:2,ease:"power1",stagger:.15,force3D:!0},.4)}resize(){var t,e;this.destroyed||((t=this.titleSplit)==null||t.revert(),(e=this.descrSplit)==null||e.revert())}destroy(){var t;this.destroyed||(this.destroyed=!0,(t=this.tl)==null||t.kill())}}const r=d.getInstance();class y{constructor(t){this.main=t,this.hero=this.main.querySelector(".hero"),this.images=this.hero.querySelectorAll(".hero_image, .hero_video"),this.videos=this.hero.querySelectorAll(".hero_video video"),this.button=this.hero.querySelector(".hero_button"),this.destroyed=!1,this.mouseEnabled=!1,this.quicks=[...this.images].map((e,s)=>{if(window.innerWidth<992)return;const h=gsap.quickTo(e,"x",{duration:m?.7:.5,ease:"power2.out",onUpdate:()=>{var n,a,u;s!==0||this.destroyed||(u=(a=(n=r.gl)==null?void 0:n.world)==null?void 0:a.hero)!=null&&u.setPosition&&r.gl.world.hero.setPosition()}}),l=gsap.quickTo(e,"y",{duration:m?.7:.5,ease:"power2.out"}),i=gsap.utils.random(.8,1.2,.1);return{x:h,y:l,random:i}}),this.main.addEventListener("mousemove",e=>this.mouseMove(e)),r.on("homeAnimationStatic",()=>{this.playHeroVideos()}),r.on("homeAnimationStatic",()=>{this.mouseEnabled=!0}),this.button&&this.button.addEventListener("click",e=>this.handleButtonClick(e)),this.init(),r.on("resize",()=>this.resize()),r.on("destroy",()=>this.destroy())}mouseMove(t){if(this.destroyed||!this.mouseEnabled||window.innerWidth<992)return;if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const i=Date.now();if(this.lastMouseMove||(this.lastMouseMove=i),i-this.lastMouseMove<32)return;this.lastMouseMove=i}const s={x:t.clientX/window.innerWidth-.5,y:t.clientY/window.innerHeight-.5},h=window.innerWidth*.2,l=window.innerHeight*.15;this.quicks.forEach(i=>{const n=s.x*h*i.random,a=s.y*l*i.random;i.x(n*-1),i.y(a*-1)})}playHeroVideos(){this.videos.forEach(t=>{const e=t._videoLoaderInstance;e&&e.playVideo()})}init(){}handleButtonClick(t){t.preventDefault();const e=document.querySelector("#work_with");r.scroll.lenis.scrollTo(e,{offset:window.innerHeight*.35,lerp:.1,duration:1.5,immediate:!1,lock:!1,force:!1})}resize(){this.destroyed}destroy(){this.destroyed||(this.destroyed=!0)}}const f=d.getInstance();class b{constructor(t){this.main=t,this.once=!1,this.triggerLoad=async()=>this.load(),f.onceLoaded&&this.load()}load(){this.once||(this.loader=new g(this.main),this.hero=new y(this.main),this.once=!0)}}export{b as default};
