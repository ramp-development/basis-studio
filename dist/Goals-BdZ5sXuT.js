import{g as i}from"./all-Cn1KrK_M.js";import{d as a}from"./GSAP-km8nWVCW.js";import{S as o}from"./SplitText-n_eiQhs4.js";import{S as m}from"./ScrollTrigger-BWsqEc1I.js";import"./CSSPlugin-YLlZY2Jb.js";import"./index-Cn1KrK_M.js";i.registerPlugin(o,m);class w{constructor(e,t){this.instance=e,this.app=t,this.list=this.instance.querySelector(".goals_list"),this.items=this.list.querySelectorAll(".goals_item"),this.destroyed=!1,this.init(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy())}init(){this.sectionHeight=this.instance.offsetHeight-window.innerHeight*.8,this.itemPart=this.sectionHeight/this.items.length,this.splits=[...this.items].map(e=>{const t=e.querySelector(".v-flex-left-center"),r=e.querySelector(".v-flex-right-center"),s=new o(t.querySelector("p"),{type:"lines",linesClass:"line"}),n=new o(t.querySelector("p"),{type:"lines",linesClass:"line-parent"}),l=new o(r.querySelector("p"),{type:"lines",linesClass:"line"}),p=new o(r.querySelector("p"),{type:"lines",linesClass:"line-parent"}),c=[...n.lines,...p.lines];i.set(c,{overflow:"hidden",perspective:1e3,perspectiveOrigin:"center center"});const g=[...s.lines,...l.lines];return i.set(g,{y:"120%",rotateX:"-35deg",transformOrigin:"center bottom",transformStyle:"preserve-3d"}),{title:s,descr:l}}),this.mastelTL=i.timeline({paused:!0,defaults:{ease:"none"}}),this.tls=[...this.items].map((e,t)=>{const r=this.splits[t],s=i.timeline({defaults:{ease:"power3",duration:a.duration,stagger:{from:"center",each:a.stagger}}});t>0&&s.to(this.splits[t-1].title.lines,{rotateX:"-35deg",z:"-1rem",y:"120%",transformStyle:"preserve-3d",transformOrigin:"50% 0",stagger:.1,duration:.8},0).to(this.splits[t-1].descr.lines,{rotateX:"-35deg",z:"-1rem",y:"120%",transformStyle:"preserve-3d",transformOrigin:"50% 0",stagger:.1,duration:.8},0).to(this.items[t-1].querySelector(".goals_number"),{rotateX:"-15deg",z:"-1rem",y:"120%",transformStyle:"preserve-3d",transformOrigin:"50% 0",duration:1.2},0),s.fromTo(r.title.lines,{y:"120%"},{y:"0%",stagger:.1,ease:"power3"},"<50%").fromTo(r.title.lines,{rotateX:"-35deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"},{rotateX:"0deg",z:"0rem",stagger:.1,ease:"power2"},"<0.2").fromTo(r.descr.lines,{y:"120%"},{y:"0%",stagger:.1,ease:"power3"},"<0.1").fromTo(r.descr.lines,{rotateX:"-35deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"},{rotateX:"0deg",z:"0rem",stagger:.1,ease:"power2"},"<0.2").fromTo(e.querySelector(".goals_number"),{y:"120%"},{y:"0%",ease:"power3",duration:2},"<0.2").fromTo(e.querySelector(".goals_number"),{rotateX:"-15deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"},{rotateX:"0deg",z:"0rem",ease:"power2",duration:2},"<0.3");const n=t===0?0:">0.2";return this.mastelTL.add(s,n),s}),this.scroll=m.create({trigger:this.instance,start:"top top",end:"bottom bottom+=150%",scrub:2,animation:this.mastelTL})}resize(){this.destroyed||(this.splits.forEach(e=>{e.title.revert(),e.descr.revert()}),this.tls.forEach(e=>e.kill()),this.mastelTL.kill(),this.scroll.kill(),this.init())}destroy(){this.destroyed||(this.destroyed=!0)}}export{w as default};
