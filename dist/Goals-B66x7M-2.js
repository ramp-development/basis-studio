import{d as o}from"./GSAP-BxWzQY2p.js";import{A as l}from"./app.js";const n=l.getInstance();class p{constructor(e){this.instance=e,this.list=this.instance.querySelector(".goals_list"),this.items=this.list.querySelectorAll(".goals_item"),this.destroyed=!1,this.init(),n.on("resize",()=>this.resize()),n.on("destroy",()=>this.destroy())}init(){this.sectionHeight=this.instance.offsetHeight-window.innerHeight,this.itemPart=this.sectionHeight/this.items.length,this.splits=[...this.items].map(e=>{const t=e.querySelector(".v-flex-left-center p"),s=e.querySelector(".v-flex-right-center p"),r=new SplitText(t,{type:"lines",mask:"lines"}),i=new SplitText(s,{type:"lines",mask:"lines"});gsap.set([t,s],{perspective:1e3,perspectiveOrigin:"center center"});const a=[...r.lines,...i.lines];return gsap.set(a,{y:"120%",rotateX:"-35deg",transformOrigin:"center bottom",transformStyle:"preserve-3d"}),{title:r,descr:i}}),this.mastelTL=gsap.timeline({paused:!0,defaults:{ease:"none"}}),this.tls=[...this.items].map((e,t)=>{const s=this.splits[t],r=gsap.timeline({defaults:{ease:"power3",duration:o.duration,stagger:{from:"center",each:o.stagger}}});t>0&&r.to(this.splits[t-1].title.lines,{rotateX:"-35deg",z:"-1rem",y:"120%",transformStyle:"preserve-3d",transformOrigin:"50% 0",stagger:.1,duration:.8},0).to(this.splits[t-1].descr.lines,{rotateX:"-35deg",z:"-1rem",y:"120%",transformStyle:"preserve-3d",transformOrigin:"50% 0",stagger:.1,duration:.8},0).to(this.items[t-1].querySelector(".goals_number"),{rotateX:"-15deg",z:"-1rem",y:"120%",transformStyle:"preserve-3d",transformOrigin:"50% 0",duration:1.2},0),r.from(s.title.lines,{y:"120%",stagger:.1,ease:"power3"},"<50%").from(s.title.lines,{rotateX:"-35deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0",stagger:.1,ease:"power2"},"<0.2").from(s.descr.lines,{y:"120%",stagger:.1,ease:"power3"},"<0.1").from(s.descr.lines,{rotateX:"-35deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0",stagger:.1,ease:"power2"},"<0.2").from(e.querySelector(".goals_number"),{y:"120%",ease:"power3",duration:2},"<0.2").from(e.querySelector(".goals_number"),{rotateX:"-15deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0",ease:"power2",duration:2},"<0.3");const i=t===0?0:">0.2";return this.mastelTL.add(r,i),r}),this.scroll=ScrollTrigger.create({trigger:this.instance,start:"top top",end:"bottom bottom",scrub:2,animation:this.mastelTL})}resize(){this.destroyed||(this.splits.forEach(e=>{e.title.revert(),e.descr.revert()}),this.tls.forEach(e=>e.kill()),this.mastelTL.kill(),this.scroll.kill(),this.init())}destroy(){this.destroyed||(this.destroyed=!0)}}export{p as default};
