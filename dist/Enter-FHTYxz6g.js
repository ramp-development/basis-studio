import{A as s}from"./app.js";const t=s.getInstance();class a{constructor(e,o){this.container=e.next.container,this.checkPages=o,this.data=e,this.loader=document.querySelector(".loader"),this.once=!1,gsap.set(this.loader,{"--clip":0,"--leftClip":0,"--bottomClip":0}),this.tl=gsap.timeline({paused:!0,defaults:{duration:.8,ease:"power2.inOut"}}),t.enterPage=this,this.tl.to(this.loader,{"--clip":100,onComplete:()=>this.complete()}),this.start()}complete(){this.loader.classList.add("hidden")}start(){t.trigger("barbaEnterStart"),gsap.set(this.container,{autoAlpha:1}),document.documentElement.style.scrollBehavior="instant",window.scrollTo({top:0,left:0,behavior:"instant"}),requestAnimationFrame(()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),requestAnimationFrame(()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.style.scrollBehavior=""})}),window.innerWidth>992?(t.gl.loadWorld(this.container),t.on("loadedWorld",async()=>{this.once||(this.checkPages(t,this.container),await t.moduleLoader.loadModules(this.container),await new Promise(e=>setTimeout(e,50)),t.scroll.init(),t.scroll.lenis.on("scroll",e=>t.gl.setScroll(e)),this.tl.play(),this.once=!0)})):(async()=>(this.checkPages(t,this.container),await t.moduleLoader.loadModules(this.container),await new Promise(e=>setTimeout(e,50)),t.scroll.init(),t.scroll.lenis.on("scroll",e=>t.gl.setScroll(e)),this.tl.play()))(),ScrollTrigger.refresh()}}export{a as default};
