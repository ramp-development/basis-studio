import{A as s}from"./app.js";const a=s.getInstance();class r{constructor(t,e){this.instance=t,this.main=e,this.scroll=a.scroll.lenis,this.bodyMain=document.body,this.close=this.instance.querySelector(".btn"),this.body=this.instance.querySelector(".popup_body"),this.overlay=this.instance.querySelector(".popup_overlay"),this.isAnimating=!1,this.isOpen=!1,this.init()}init(){this.enterTl=gsap.timeline({paused:!0,defaults:{duration:1,ease:"power2"},onStart:()=>{this.isAnimating=!0,this.instance.classList.add("active"),this.scroll.stop(),this.bodyMain.classList.add("hide-nav"),this.handleCanvasZIndex(!1)},onComplete:()=>{this.isAnimating=!1,this.isOpen=!0}}),this.enterTl.fromTo(this.body,{yPercent:100,scale:.9,opacity:1},{opacity:1,yPercent:0,scale:1,overwrite:"auto"}).fromTo(this.overlay,{opacity:0},{opacity:1,overwrite:"auto"},"<"),this.initButtons(),this.leaveTl=gsap.timeline({paused:!0,defaults:{duration:.6,ease:"power2"},onStart:()=>{this.isAnimating=!0,this.scroll.start(),this.bodyMain.classList.remove("hide-nav")},onComplete:()=>{this.isAnimating=!1,this.isOpen=!1,this.instance.classList.remove("active"),this.handleCanvasZIndex(!0)}}),this.leaveTl.to(this.body,{opacity:0,overwrite:"auto"}).to(this.overlay,{opacity:0,overwrite:"auto"},"<"),this.close.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.closePopup()}),this.overlay.addEventListener("click",t=>{t.target===this.overlay&&this.closePopup()})}initButtons(){document.addEventListener("click",t=>{t.target.closest('[data-popup-trigger="true"]')&&(t.preventDefault(),this.openPopup())})}openPopup(){this.isAnimating||this.isOpen||this.enterTl.restart()}closePopup(){this.isAnimating||!this.isOpen||this.leaveTl.restart()}handleCanvasZIndex(t){const e=document.querySelector(".canvas-container");if(!e)return;const i=document.querySelector("main").dataset.transitionPage==="case-inner";t&&i?e.style.zIndex="2":e.style.zIndex="-1"}}export{r as default};
