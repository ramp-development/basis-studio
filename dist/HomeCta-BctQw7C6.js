import{g as i}from"./all-Cn1KrK_M.js";import"./GSAP-km8nWVCW.js";import{S as a}from"./ScrollTrigger-BWsqEc1I.js";import{S as n}from"./SplitText-n_eiQhs4.js";import"./CSSPlugin-YLlZY2Jb.js";import"./index-Cn1KrK_M.js";i.registerPlugin(n,a);class u{constructor(t,e){this.instance=t,this.app=e,this.scroll=this.app.scroll.lenis,this.destroyed=!1,this.section=this.instance.querySelector(".h-cta"),this.items=this.instance.querySelectorAll(".h-cta_item"),this.section.style.setProperty("--length",`${this.items.length}`),a.refresh(),this.init(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy())}init(){this.splits=[...this.items].map(t=>{const e=t.querySelector(".heading_span");return new n(e,{type:"lines, words",linesClass:"line"})}),this.sectionHeight=this.section.offsetHeight-window.innerHeight*.8,this.itemPart=this.sectionHeight/this.items.length,this.masterTl=i.timeline({paused:!0,defaults:{ease:"none"}}),this.tls=[...this.items].map((t,e)=>{const r=this.splits[e],o=window.innerWidth<=992;i.set(r.lines,{overflow:"clip",paddingBottom:"0.1em",marginBottom:"-0.1em",perspective:o?"none":1e3});const s=i.timeline({defaults:{ease:"power3",duration:1}});e>0&&(o?s.to(this.splits[e-1].words,{y:"120%",stagger:.1,duration:.8},0):s.to(this.splits[e-1].words,{rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",y:"120%",transformStyle:"preserve-3d",transformOrigin:"50% 0",stagger:.1,duration:.8},0)),s.fromTo(r.words,{y:"120%"},{y:"0%",stagger:.1,ease:"power3",stagger:.1},"<50%"),o||s.fromTo(r.words,{rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"},{rotateX:"0deg",rotateY:"0deg",z:"0rem",stagger:.1,ease:"power2",stagger:.1},"<0.2");const h=e===0?0:">0.2";return this.masterTl.add(s,h),s}),this.scroll=a.create({trigger:this.section,start:"top top",end:"bottom bottom+=100%",scrub:!0,animation:this.masterTl})}getTop(t){let e=0;for(;t&&t!==document.body;)e+=t.offsetTop||0,t=t.offsetParent;return e}resize(){this.destroyed||(this.splits.forEach(t=>t.revert()),this.tls.forEach(t=>t.kill()),this.masterTl.kill(),this.scroll.kill(),this.init())}destroy(){this.destroyed||(this.destroyed=!0)}}export{u as default};
