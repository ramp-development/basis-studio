import{A as i}from"./app.js";const t=i.getInstance();class a{constructor(e,s){this.container=e.next.container,this.checkPages=s,this.data=e,this.loader=document.querySelector(".loader"),this.once=!1,gsap.set(this.loader,{"--clip":0,"--leftClip":0,"--bottomClip":0}),this.tl=gsap.timeline({paused:!0,defaults:{duration:.8,ease:"power2.inOut"}}),t.enterPage=this,this.tl.to(this.loader,{"--clip":100,onComplete:()=>this.complete()}),this.start()}complete(){this.loader.classList.add("hidden")}start(){t.trigger("barbaEnterStart"),gsap.set(this.container,{autoAlpha:1}),window.innerWidth>992?(t.gl.loadWorld(this.container),t.on("loadedWorld",async()=>{this.once||(this.checkPages(t,this.container),await t.moduleLoader.loadModules(this.container),await new Promise(e=>setTimeout(e,50)),t.scroll.init(),t.scroll.lenis.on("scroll",e=>t.gl.setScroll(e)),this.tl.play(),this.once=!0)})):(async()=>(this.checkPages(t,this.container),await t.moduleLoader.loadModules(this.container),await new Promise(e=>setTimeout(e,50)),t.scroll.init(),t.scroll.lenis.on("scroll",e=>t.gl.setScroll(e)),this.tl.play()))(),ScrollTrigger.refresh()}}export{a as default};
