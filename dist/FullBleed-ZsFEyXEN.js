import"./GSAP-km8nWVCW.js";import{g as l}from"./index-Cn1KrK_M.js";import{S as m}from"./ScrollTrigger-BWsqEc1I.js";import{S as h}from"./SplitText-n_eiQhs4.js";import"./CSSPlugin-YLlZY2Jb.js";class O{constructor(e,r,c){this.instance=e,this.app=r,this.main=c,this.destroyed=!1,this.wrapper=this.instance.querySelector(".full_wrapper"),this.items=this.instance.querySelectorAll(".full_item"),this.init(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy())}init(){this.splits=[],this.scrolls=[],l.set(this.wrapper,{height:this.items.length*150+150+"svh"}),m.refresh(),this.height=this.instance.getBoundingClientRect().height,this.itemPart=this.height/(this.items.length+.3),this.items.forEach((e,r)=>{const c=e.querySelector(".f-64"),T=e.querySelector("p"),p=e.querySelector("video"),d=e.querySelector(".full_button"),f=new h(c,{type:"lines",linesClass:"full_line"}),b=new h(c,{type:"lines",linesClass:"full_line-parent"}),u=new h(T,{type:"lines",linesClass:"full_line"}),g=new h(T,{type:"lines",linesClass:"full_line-parent"});this.splits.push(u,f,g);const S=[...b.lines],x=[...g.lines],w=[...f.lines],v=[...u.lines],L=[...S,...x],E=[...w,...v];l.set(L,{overflow:"hidden",perspective:1e3,perspectiveOrigin:"center center"}),l.set(E,{y:"120%",rotateX:"-45deg",transformOrigin:"center bottom",transformStyle:"preserve-3d"});const y=l.timeline({paused:!0});if(y.to(w,{y:"0%",rotateX:"0deg",duration:.8,ease:"power3.out",stagger:.1},0).to(v,{y:"0%",rotateX:"0deg",duration:.8,ease:"power3.out",stagger:.1},.05),d&&window.innerWidth<=991&&(l.set(d,{opacity:0,y:20,scale:.8}),y.to(d,{opacity:1,y:0,scale:1,duration:.6,ease:"power3.out"},">")),e.textTl=y,u.lines.forEach((t,s)=>{const i=s*.1+.1;t.style.setProperty("--delay",i+"s")}),f.lines.forEach((t,s)=>{const i=s*.1+.1;t.style.setProperty("--delay",i+"s")}),p&&window.innerWidth<=991){l.set(p.parentElement,{perspective:1e3,perspectiveOrigin:"center center"}),l.set(p,{transformOrigin:"center center",transformStyle:"preserve-3d",opacity:0,rotationZ:-18,rotationY:45,rotationX:-45,scale:.4});const t=l.timeline({paused:!0});t.to(p,{opacity:1,rotationZ:0,rotationY:0,rotationX:0,scale:1,duration:1,ease:"power3.out"}),e.mobileTl=t}this.scrolls[r]=m.create({trigger:e,start:`top center-=${this.itemPart*r}`,end:`+=${this.itemPart}`,onEnter:()=>{var t,s,i,n,a;if(this.items.forEach(o=>{o.classList.remove("active"),o.textTl&&o.textTl.pause(0)}),e.classList.add("active"),e.classList.add("show-bg"),window.innerWidth<991){this.items.forEach(o=>{o.querySelector("video")&&o.mobileTl&&o.mobileTl.pause(0)}),e.mobileTl&&e.mobileTl.play(),e.textTl&&e.textTl.play();return}(a=(n=(i=(s=(t=this.app.gl)==null?void 0:t.world)==null?void 0:s.full)==null?void 0:i.meshs)==null?void 0:n[r])!=null&&a.tl&&this.app.gl.world.full.meshs[r].tl.play(),e.textTl&&e.textTl.play()},onEnterBack:()=>{if(this.items.forEach(t=>{t.classList.remove("active"),t.textTl&&t.textTl.pause(0)}),e.classList.add("active"),window.innerWidth<991){this.items.forEach(t=>{t.mobileTl&&t.mobileTl.pause(0)}),e.mobileTl&&e.mobileTl.play(),e.textTl&&e.textTl.play();return}e.textTl&&e.textTl.play()},onLeaveBack:()=>{var t,s,i,n,a;if(e.classList.remove("show-bg"),e.textTl&&e.textTl.reverse(),window.innerWidth<991){e.mobileTl&&e.mobileTl.reverse();return}(a=(n=(i=(s=(t=this.app.gl)==null?void 0:t.world)==null?void 0:s.full)==null?void 0:i.meshs)==null?void 0:n[r])!=null&&a.tl&&this.app.gl.world.full.meshs[r].tl.reverse()}})})}resize(){this.destroyed}destroy(){this.destroyed||(this.destroyed=!0)}}export{O as default};
