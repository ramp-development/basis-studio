import{A as a}from"./app.js";const o=a.getInstance();class g{constructor(t){this.instance=t,this.scroll=o.scroll.lenis,this.destroyed=!1,this.section=this.instance.querySelector(".h-cta"),this.items=this.instance.querySelectorAll(".h-cta_item"),this.section.style.setProperty("--length",`${this.items.length}`),ScrollTrigger.refresh(),this.init(),o.on("resize",()=>this.resize()),o.on("destroy",()=>this.destroy())}init(){this.splits=[...this.items].map(t=>{const e=t.querySelector(".heading_span");return new SplitText(e,{type:"lines, words",mask:"words"})}),this.sectionHeight=this.section.offsetHeight-window.innerHeight*.8,this.itemPart=this.sectionHeight/this.items.length,this.masterTl=gsap.timeline({paused:!0,defaults:{ease:"none"}}),this.tls=[...this.items].map((t,e)=>{const r=this.splits[e],i=window.innerWidth<=992;gsap.set(r.lines,{paddingBottom:"0.1em",marginBottom:"-0.1em",perspective:i?"none":1e3});const s=gsap.timeline({defaults:{ease:"power3",duration:1}});e>0&&(i?s.to(this.splits[e-1].words,{yPercent:120,stagger:.1,duration:.8},0):s.to(this.splits[e-1].words,{rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",yPercent:120,transformStyle:"preserve-3d",transformOrigin:"50% 0",stagger:.1,duration:.8},0)),s.fromTo(r.words,{yPercent:120},{yPercent:0,stagger:.1,ease:"power3",stagger:.1},"<50%"),i||s.fromTo(r.words,{rotateX:"-35deg",rotateY:"-5deg",z:"-1rem",transformStyle:"preserve-3d",transformOrigin:"50% 0"},{rotateX:"0deg",rotateY:"0deg",z:"0rem",stagger:.1,ease:"power2",stagger:.1},"<0.2");const n=e===0?0:">0.2";return this.masterTl.add(s,n),s}),this.scroll=ScrollTrigger.create({trigger:this.section,start:"top top",end:"bottom bottom",scrub:!0,animation:this.masterTl})}getTop(t){let e=0;for(;t&&t!==document.body;)e+=t.offsetTop||0,t=t.offsetParent;return e}resize(){this.destroyed||(this.splits.forEach(t=>t.revert()),this.tls.forEach(t=>t.kill()),this.masterTl.kill(),this.scroll.kill(),this.init())}destroy(){this.destroyed||(this.destroyed=!0)}}export{g as default};
