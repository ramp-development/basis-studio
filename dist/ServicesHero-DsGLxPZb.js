class c{constructor(e,t){this.instance=e,this.app=t,this.destroyed=!1,this.isMobile=window.innerWidth<992,this.title=this.instance.querySelector(".h-services_title"),this.text=this.title.querySelector("h1"),this.btn=this.instance.querySelector(".h-services_btn"),this.bg=this.instance.querySelector(".h-services_bg"),this.init(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroy())}init(){this.isMobile?this.initMobile():this.initDesktop()}initMobile(){this.tl=gsap.timeline({paused:!0});const e=this.title.offsetHeight,t=Math.min(e*.5,150);this.tl.fromTo(this.title,{y:0},{y:-t,ease:"power2.out",duration:1}).fromTo(this.text,{scale:1},{scale:1.05,ease:"power2.out",duration:1},"<").fromTo(this.btn,{yPercent:100,opacity:0},{yPercent:0,opacity:1,ease:"power2.out",duration:.4},.3),this.scroll=ScrollTrigger.create({trigger:this.instance,start:"top top",end:"bottom center",animation:this.tl,scrub:1,onUpdate:i=>{this.bg.style.setProperty("--progress",i.progress)}})}initDesktop(){this.tl=gsap.timeline({paused:!0});const e=window.innerHeight/2,t=this.title.getBoundingClientRect(),i=t.top+t.height/2-e;this.tl.fromTo(this.title,{y:0},{y:-i,ease:"power3",duration:1}).fromTo(this.text,{scale:1},{scale:1.4,ease:"power3",duration:1},"<").fromTo(this.btn,{yPercent:100,opacity:0},{yPercent:0,opacity:1,ease:"power3",duration:.5},.5),this.scroll=ScrollTrigger.create({trigger:this.instance,start:"top top",end:"bottom bottom",animation:this.tl,scrub:!0,onUpdate:s=>{var o,r,l,n,h;(h=(n=(l=(r=(o=this.app.gl)==null?void 0:o.world)==null?void 0:r.hero)==null?void 0:l.material)==null?void 0:n.uniforms)!=null&&h.uScroll&&(this.app.gl.world.hero.material.uniforms.uScroll.value=s.progress),this.bg.style.setProperty("--progress",s.progress)}})}resize(){var t,i;if(this.destroyed)return;const e=this.isMobile;this.isMobile=window.innerWidth<992,e!==this.isMobile&&((t=this.tl)==null||t.kill(),(i=this.scroll)==null||i.kill(),this.init())}destroy(){var e,t;this.destroyed||(this.destroyed=!0,(e=this.tl)==null||e.kill(),(t=this.scroll)==null||t.kill(),this.tl=null,this.scroll=null)}}export{c as default};
